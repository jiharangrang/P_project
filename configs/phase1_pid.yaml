hardware:
  use_led: true
  use_beep: true
  led_on_start: true
  beep_on_start: true
  led_mode: 2
  servo_defaults: [87, 29]
  servo_neutral: [90, 25]
  camera:
    index: 0
    resolution: [320, 240]
    brightness: 0
    contrast: 0
    saturation: 50
    exposure: 100
    gain: 0

perception:
  roi_top: 756          # 0~1000 스케일
  roi_bottom: 946       # 0~1000 스케일
  detect_value: 170     # Lab L 밝기 임계값 (회색/밝은 선)
  lab_red_l_min: 30     # Lab 빨간선 최소 L
  lab_red_a_min: 150    # Lab 빨간선 최소 a
  lab_red_b_min: 140    # Lab 빨간선 최소 b
  lab_gray_chroma_thr: 15  # 회색 선 크로마 최대 허용(|a-128|, |b-128|의 최대값)
  ipm_resolution: [320, 240]

control:
  base_speed: 60        # 직진 기본 속도
  speed_limit: 120      # 모터 포화 한계
  steer_limit: 80       # PID 출력 한계 (좌/우)
  steer_scale: 1.0
  steer_deadband: 0.0
  kp: 45.0
  ki: 0.0
  kd: 8.0

  # 좌/우 턴 감지 및 제어 스케일
  turn:
    slope_thresh: 0.01     # heading 기울기 임계
    offset_thresh: 0.10    # 중심 오차 임계
    speed_scale: 0.5      # 턴 시 감속 계수
    steer_scale: 2.50      # 턴 시 조향 스케일 배율
    inner_min_speed: 10    # 턴 시 안쪽 바퀴 최소 전진 속도 (역회전 방지)

  # heading(주황선) 기반 조향 가중치
  heading:
    smooth_alpha: 0.20     # EMA로 부드럽게
    thresh: 0.01           # 이 값 이상일 때만 적용

runtime:
  show_windows: true
  print_debug: true
  fail_safe_beep: true
  fps_window: 15
  headless_delay: 0.02
